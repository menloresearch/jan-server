graph TB
    subgraph "Client Layer"
        WEB[Web Applications]
        API_CLIENT[API Clients]
        MOBILE[Mobile Apps]
        CLI[CLI Tools]
    end
    
    subgraph "Kubernetes Cluster"
        subgraph "Jan API Gateway Service"
            GATEWAY[Jan API Gateway<br/>Port 8080]
            GATEWAY_FEATURES[Features:<br/>- OpenAI Compatible API<br/>- Multi-tenant Auth<br/>- MCP Protocol<br/>- Web Search<br/>- Profiling]
        end
        
        subgraph "Jan Inference Model Service"
            INFERENCE[Jan Inference Model<br/>Port 8101]
            INFERENCE_FEATURES[Features:<br/>- Model Serving<br/>- Health Monitoring<br/>- Load Balancing]
        end
        
        subgraph "Database Service"
            POSTGRES[PostgreSQL<br/>Port 5432]
            DB_FEATURES[Features:<br/>- Read/Write Replicas<br/>- Auto Migrations<br/>- Connection Pooling]
        end
        
        subgraph "External Integrations"
            SERPER[Serper API<br/>Web Search]
            GOOGLE[Google OAuth2<br/>Authentication]
            PYROSCOPE[Grafana Pyroscope<br/>Profiling]
        end
    end
    
    %% Client connections
    WEB --> GATEWAY
    API_CLIENT --> GATEWAY
    MOBILE --> GATEWAY
    CLI --> GATEWAY
    
    %% Service connections
    GATEWAY --> INFERENCE
    GATEWAY --> POSTGRES
    GATEWAY --> SERPER
    GATEWAY --> GOOGLE
    GATEWAY --> PYROSCOPE
    
    %% Styling
    classDef clientClass fill:#e1f5fe
    classDef serviceClass fill:#f3e5f5
    classDef dbClass fill:#e8f5e8
    classDef externalClass fill:#fff3e0
    
    class WEB,API_CLIENT,MOBILE,CLI clientClass
    class GATEWAY,INFERENCE,GATEWAY_FEATURES,INFERENCE_FEATURES serviceClass
    class POSTGRES,DB_FEATURES dbClass
    class SERPER,GOOGLE,PYROSCOPE externalClass